<ion-header>
  <ion-navbar>
    <ion-title>
    <ion-icon name="menu" menuToggle></ion-icon>&nbsp;
      Calendar
    </ion-title>
  </ion-navbar>
</ion-header>

<style>
    .tableHead th{
        width:14%;
        float:left;
        border-top:solid 1px black;
        background-color: darkgrey
    }
    .tableBody{
        display:flex;
    }
    .tableBody td{
        width:14%;
        float:left;
        border-top:solid 1px black;
        min-height: 60px;
        align-items: stretch;
    }
</style>

<ion-content>
    <ion-list>
    <ion-slides ><!--(ionSlideDidChange)='slideChanged($event)' initialSlide=1-->
        <ion-slide *ngFor='let cal of calendarArr' style='align-items:baseline;'>
            <ion-row align-items-start>
                <ion-col>
                    <!--<div>
                        <ion-icon style='font-size:50px;float:left;margin-left:20%;' (click)='prev()' name="arrow-dropleft" item-center></ion-icon>
                    </div>-->
                    <div style='float:left'>
                        <button ion-button outline item-left icon-left (click)='prev()'>
                        < Prev
                        </button>
                    </div>
                </ion-col>
                <ion-col>
                    <div align='center'>
                        <button ion-button outline (click)='defaultSet()'>
                        Today
                        </button>
                    </div>
                </ion-col>
                <ion-col>
                    <!--<div>
                        <ion-icon style='font-size:50px;float:right;margin-right:20%;' (click)='next()' name="arrow-dropright" item-center></ion-icon>
                    </div>-->
                    <div style='float:right'>
                        <button ion-button outline item-right icon-right (click)='next()'>
                        Next >
                        </button>
                    </div>
                </ion-col>
            </ion-row>
            <ion-row>
                <ion-col col-12>
                    <div align='center'>
                        <ion-item style='max-width:230px;'>
                            <ion-select (ionChange)='changeYYYY($event)' style='font-size:30px;min-width:150px;float:left;' interface="popover">
                                <ion-option *ngFor='let y of yyyy' 
                                [value]="y" [selected]="y==cal.date.getFullYear()?true:false">{{y}}</ion-option>
                            </ion-select>
                            <ion-select (ionChange)='changeMM($event)' style='font-size:30px;min-width:120px;float:right;' interface="popover">
                                <ion-option *ngFor='let m of mm' 
                                [value]="m" [selected]="m==cal.date.getMonth()+1?true:false">{{m}}</ion-option>
                            </ion-select>
                        </ion-item>
                    </div>
                </ion-col>
            </ion-row>
            <table style='width:100%;margin-left:1%;'>
                <tr class="tableHead">
                    <th>Sun</th>
                    <th>Mon</th>
                    <th>Tue</th>
                    <th>Wed</th>
                    <th>Thu</th>
                    <th>Fri</th>
                    <th>Sat</th>
                </tr>
                <tr *ngFor='let week of cal.calendar' class='tableBody'>
                    <td *ngFor='let data of week'
                        (click)='goWorkoutPage(data.date)'
                        [style.color]='data.date.getMonth() != cal.date.getMonth() ? "grey": data.date.getDay()==0? "red" : "black"'
                        [style.backgroundColor]='data.date.getMonth() == cal.date.getMonth() ? "": "rgba(224, 224, 224, 0.72)"'
                        [style.border]="data.date.getFullYear() == today.getFullYear() && data.date.getMonth() == today.getMonth() && data.date.getDate() == today.getDate() ? 'solid 4px blue':''">
                        <strong>{{data.date | date:'dd'}}</strong>
                        <div 
                            style='overflow: hidden;white-space: nowrap;color:black !important; font-size:10px;'
                            *ngFor='let workout of data.workouts'
                            [style.border]='workout.done>=workout.goal?"solid 1px green":"solid 1px red"'
                            >
                            <strong>{{workout.done}}</strong>/{{workout.goal}}
                            <br>
                            {{workout.name}}
                            <small *ngIf='workout.weight && workout.weightUnit'>
                            {{workout.weight}}{{workout.weightUnit}}
                            </small>
                        </div>
                    </td>
                </tr>
            </table>
        </ion-slide>
    </ion-slides>
    </ion-list>
</ion-content>








